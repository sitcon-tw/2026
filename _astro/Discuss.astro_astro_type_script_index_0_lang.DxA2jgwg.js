import{g as e}from"./index.CB87Sc6I.js";import{S as h}from"./ScrollTrigger.Cv03IO65.js";e.registerPlugin(h);const C=()=>{const t=document.getElementById("chatStream");if(!t)return()=>{};if(t.dataset.chatInit==="true")return()=>{};t.dataset.chatInit="true";const m=t.dataset.messages;if(!m)return()=>{};const r=t,f=JSON.parse(m),w=10,L=2e3;let g=0,p=0,a=null;const E=(n,i)=>{const o=document.createElement("div");return o.className=`message-bubble${i?" is-offset":""}`,o.innerHTML=`
				<div class="bubble-content">${n}</div>
				<div class="bubble-tail">
					<svg viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M0 21.9509C4.84211 12.1674 0 0 0 0L23 1.19723V1.22056C23 1.22056 9.68421 23.1715 0 21.9509Z" fill="#C2A05A"/>
					</svg>
				</div>
			`,o},b=(n=!0)=>{const i=f[g%f.length],o=p%2===1,c=E(i,o);if(r.appendChild(c),n&&(e.set(c,{opacity:0,scale:.92,transformOrigin:"left bottom"}),e.to(c,{opacity:1,scale:1,duration:.45,delay:.05,ease:"back.out(1.4)"})),r.children.length>w){const s=r.firstElementChild;s&&!s.dataset.removing&&(s.dataset.removing="true",e.to(s,{opacity:0,duration:.3,ease:"power2.out",onComplete:()=>s.remove()}))}g++,p++},v=()=>{a===null&&(a=window.setInterval(()=>b(!0),L))},l=()=>{a!==null&&(window.clearInterval(a),a=null)};for(let n=0;n<4;n++)b(!1);const S=h.create({trigger:".chat-section",start:"top bottom",end:"bottom top",onEnter:v,onLeave:l,onEnterBack:v,onLeaveBack:l});return()=>{l(),typeof e<"u"&&(e.killTweensOf(t),e.killTweensOf(t.children)),S.kill(),t.dataset.chatInit="false"}};let d=null;const u=()=>{d?.(),d=C()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u,{once:!0}):u();document.addEventListener("astro:page-load",u);document.addEventListener("astro:before-swap",()=>d?.());
