import{gsap as se}from"./index.CMq3EfTn.js";const e=document.getElementById("agenda-scroll"),O=document.getElementById("scroll-left"),R=document.getElementById("scroll-right"),V=document.getElementById("zoom-in"),Y=document.getElementById("zoom-out"),p=document.getElementById("current-time-indicator"),y=document.getElementById("current-time-line"),Z=document.getElementById("agenda-timeline-inner");(!e||!O||!R)&&console.warn("Agenda timeline elements not found");if(Z&&V&&Y){let n=2;const i=0,s=5,E=.25,u=()=>{Z.style.setProperty("--time-scale",n.toString())};u(),V.addEventListener("click",()=>{n=Math.min(s,n+E),u()}),Y.addEventListener("click",()=>{n=Math.max(i,n-E),u()})}if(e&&O&&R){O.addEventListener("click",()=>{e.scrollBy({left:-300,behavior:"smooth"})}),R.addEventListener("click",()=>{e.scrollBy({left:300,behavior:"smooth"})});let i=!1,s=0,E=0,u=0,b=0,h=0,a=null;const S=t=>{const l=t.target;if(!l||document.getElementById("session-modal")?.classList.contains("active")||l.closest(".venue-label")||l.tagName==="BUTTON"||l.tagName==="A"||l.closest("button")||l.closest("a"))return;a&&(a.kill(),a=null),i=!0;const o="touches"in t?t.touches[0].clientX:t.clientX;s=o,E=e.scrollLeft,u=o,b=Date.now(),h=0,e.style.cursor="grabbing",e.style.userSelect="none",t.preventDefault()},c=t=>{if(!i)return;if(document.getElementById("session-modal")?.classList.contains("active")){f();return}const d="touches"in t?t.touches[0].clientX:t.clientX,m=Date.now(),o=d-s,T=m-b;T>0&&(h=(d-u)/T),e.scrollLeft=E-o,u=d,b=m,t.preventDefault()},f=()=>{if(i&&(i=!1,e.style.cursor="grab",e.style.userSelect="",Math.abs(h)>.01)){const t=e.scrollWidth-e.clientWidth,l=e.scrollLeft,d=-h*1e3,m=l+d*.5,o=Math.max(0,Math.min(t,m));a=se.to(e,{scrollLeft:o,duration:Math.min(2,Math.abs(h)*10),ease:"power2.out",onUpdate:()=>{e.scrollLeft<0?(e.scrollLeft=0,a&&(a.kill(),a=null)):e.scrollLeft>t&&(e.scrollLeft=t,a&&(a.kill(),a=null))},onComplete:()=>{a=null}})}};e.addEventListener("mousedown",S),document.addEventListener("mousemove",c),document.addEventListener("mouseup",f),e.addEventListener("touchstart",S,{passive:!1}),e.addEventListener("touchmove",c,{passive:!1}),e.addEventListener("touchend",f),e.addEventListener("wheel",t=>{if(document.getElementById("session-modal")?.classList.contains("active"))return;const d=t.deltaX||0,m=t.deltaY||0;Math.abs(d)>Math.abs(m)?d!==0&&(t.preventDefault(),e.scrollBy({left:d,behavior:"auto"})):m!==0&&t.shiftKey&&(t.preventDefault(),e.scrollBy({left:m,behavior:"auto"}))},{passive:!1});const g=document.getElementById("agenda-timeline-inner"),B=g?.dataset.minTime,v=g?.dataset.maxTime,q=g?.dataset.totalSlots,z=g?.dataset.timeLabels,F=g?.dataset.slotLeftPercents,K=g?.dataset.slotWeights,U=g?.dataset.totalWeight;if(g&&p&&y&&B&&v&&q&&z&&F&&K&&U){const t=parseInt(B,10),l=parseInt(v,10),d=parseInt(q,10),m=parseFloat(U);let o=[],T=[],P=[];try{o=JSON.parse(z),T=JSON.parse(F),P=JSON.parse(K)}catch{o=[],T=[],P=[]}const ne=N=>{if(d<=0||o.length<2)return 0;for(let L=0;L<o.length-1;L++){const w=o[L],k=o[L+1];if(N>=w&&N<=k){const I=k-w,C=I>0?(N-w)/I:0,A=P[L]/m*100;return T[L]+C*A}}return N<o[0]?0:100};if(!isNaN(t)&&!isNaN(l)&&o.length>=2){const N=Date.now();if(N<t||N>l)p.parentNode&&p.parentNode.removeChild(p),y.parentNode&&y.parentNode.removeChild(y);else{let L=!1;const w=y||p;if(w&&!L){const I=w.offsetLeft,C=e.clientWidth,A=I-C/2;e.scrollTo({left:Math.max(0,A),behavior:"smooth"}),L=!0}const k=()=>{const I=Date.now();if(I>=t&&I<=l){const A=`${ne(I)}%`;p.style.left=A,y.style.left=A}else p.parentNode&&p.parentNode.removeChild(p),y.parentNode&&y.parentNode.removeChild(y)};k(),setInterval(k,1e3)}}}}const D=document.getElementById("agenda-timeline"),X=document.getElementById("filter-tabs-list"),M=document.getElementById("filter-tab-slider"),$=document.querySelectorAll(".filter-tab");function W(){if(!X||!M)return;const n=X.querySelector(".filter-tab.active, .filter-tab[aria-selected='true']");if(!n)return;const i=X.getBoundingClientRect(),s=n.getBoundingClientRect();M.style.left=`${s.left-i.left}px`,M.style.width=`${s.width}px`}$.forEach(n=>{n.addEventListener("click",()=>{const i=n.dataset.filter;if(i){if(i==="all"&&D?.classList.contains("agenda-url-curated")){document.dispatchEvent(new CustomEvent("clearUrlCuratedState")),W();return}$.forEach(s=>{s.setAttribute("aria-selected","false"),s.classList.remove("active")}),n.setAttribute("aria-selected","true"),n.classList.add("active"),D&&(i==="favorites"?D.classList.add("agenda-filter-favorites"):D.classList.remove("agenda-filter-favorites")),W()}})});requestAnimationFrame(()=>{W()});M&&window.addEventListener("resize",W);const x=document.getElementById("share-jam-trigger"),r=document.getElementById("share-jam-trigger-mobile"),ie="sitcon2026:agendaBookmarks";let J=!1;function ee(){try{const n=localStorage.getItem(ie),i=n?JSON.parse(n):[],s=Array.isArray(i)&&i.length>0;x&&(x.style.display=s?"":"none"),r&&(s&&!J?(r.classList.remove("hidden"),r.classList.add("slide-in","glowing"),setTimeout(()=>{r.classList.remove("glowing")},2e3)):!s&&J?(r.classList.remove("slide-in","glowing"),r.classList.add("hidden")):s?(r.classList.remove("hidden"),r.classList.add("slide-in")):(r.classList.add("hidden"),r.classList.remove("slide-in","glowing"))),J=s}catch{x&&(x.style.display="none"),r&&r.classList.add("hidden")}}x&&x.addEventListener("click",()=>{window.openShareJamModal?.()});r&&r.addEventListener("click",()=>{window.openShareJamModal?.()});ee();document.addEventListener("agendaBookmarksChanged",ee);function j(){const n=document.getElementById("agenda-phone-view");if(!n||window.matchMedia("(min-width: 769px)").matches)return;const i=document.getElementById("agenda-timeline-inner"),s=i?.getAttribute("data-min-time"),E=i?.getAttribute("data-max-time"),u=s!=null?parseInt(s,10):NaN,b=E!=null?parseInt(E,10):NaN,h=Date.now();if(isNaN(u)||isNaN(b)||h<u||h>b){n.querySelectorAll(".time-block.current").forEach(c=>{c.classList.remove("current"),c.querySelector(".phone-time-indicator")?.remove()});return}const a=n.querySelectorAll(".time-block");let S=null;a.forEach(c=>{const f=parseInt(c.dataset.time??"",10);!isNaN(f)&&f<=h&&(S=S==null?f:Math.max(S,f))}),a.forEach(c=>{const f=parseInt(c.dataset.time??"",10),g=S!=null&&f===S,B=c.querySelector(".time-block-label");let v=c.querySelector(".phone-time-indicator");g?(c.classList.add("current"),!v&&B&&(v=document.createElement("span"),v.className="phone-time-indicator",v.setAttribute("aria-hidden","true"),B.insertBefore(v,B.firstChild))):(c.classList.remove("current"),v?.remove())})}const oe=document.getElementById("agenda-phone-view"),te=document.getElementById("agenda-timeline-inner"),_=te?.getAttribute("data-min-time"),G=te?.getAttribute("data-max-time"),H=_!=null?parseInt(_,10):NaN,Q=G!=null?parseInt(G,10):NaN,ae=!isNaN(H)&&!isNaN(Q)&&Date.now()>=H&&Date.now()<=Q;oe&&ae&&(j(),setInterval(j,60*1e3));
