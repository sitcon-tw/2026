import{g as d}from"./index.CB87Sc6I.js";const C=2,B=.08;let M=0,y=0,A=1,O=0,G=0,$=1,U=0,V=0;const nt=()=>{const e=document.querySelector(".explore-container"),S=document.getElementById("explore-universe");if(!e||!S)return;let s=!1,u=!1,n=0,m=0,o=0,g=0,D=0;const Y=()=>{const t=e.offsetWidth,i=e.offsetHeight,c=U*A,r=V*A,a=2.5*parseFloat(getComputedStyle(document.documentElement).fontSize),p=Math.min(a,t-c-a),h=Math.max(a,t-c-a),f=Math.min(a,i-r-a),w=Math.max(a,i-r-a);M=Math.min(Math.max(M,p),h),y=Math.min(Math.max(y,f),w)};d.ticker.add(()=>{const t=M-O,i=y-G,c=A-$;Math.abs(t)<.1&&Math.abs(i)<.1&&Math.abs(c)<.001||(O+=t*B,G+=i*B,$+=c*B,d.set(S,{x:O,y:G,scale:$}))}),e.addEventListener("mousedown",t=>{t.target.closest(".explore-item")||(s=!0,n=t.clientX,m=t.clientY,o=M,g=y,e.style.cursor="grabbing")}),window.addEventListener("mousemove",t=>{if(!s)return;t.preventDefault();const i=(t.clientX-n)*C,c=(t.clientY-m)*C;M=o+i,y=g+c,Y()}),window.addEventListener("mouseup",()=>{s=!1,e.style.cursor="grab"}),e.addEventListener("touchstart",t=>{if(t.touches.length===2){s=!1,u=!0;const i=t.touches[0],c=t.touches[1];D=Math.hypot(i.clientX-c.clientX,i.clientY-c.clientY);return}t.target.closest(".explore-item")||(s=!0,n=t.touches[0].clientX,m=t.touches[0].clientY,o=M,g=y)},{passive:!1}),window.addEventListener("touchmove",t=>{if(u&&t.touches.length===2){t.preventDefault();const r=t.touches[0],l=t.touches[1],a=Math.hypot(r.clientX-l.clientX,r.clientY-l.clientY);if(D<.1)return;const p=a/D;if(Math.abs(p-1)<.005)return;const h=A;let f=h*p;if(f=Math.max(.5,Math.min(f,3)),D=a,f===h)return;const w=e.getBoundingClientRect(),L=(r.clientX+l.clientX)/2-w.left,x=(r.clientY+l.clientY)/2-w.top;M=L-(L-M)/h*f,y=x-(x-y)/h*f,A=f,Y();return}if(!s||t.touches.length>1)return;t.preventDefault();const i=(t.touches[0].clientX-n)*C,c=(t.touches[0].clientY-m)*C;M=o+i,y=g+c,Y()},{passive:!1}),window.addEventListener("touchend",t=>{t.touches.length===0?(s=!1,u=!1):t.touches.length===1&&(u=!1,s=!1)}),e.addEventListener("wheel",t=>{t.preventDefault();const c=-t.deltaY*.001,r=A;let l=A+c;if(l=Math.max(.5,Math.min(l,3)),l===r)return;const a=e.getBoundingClientRect(),p=t.clientX-a.left,h=t.clientY-a.top;M=p-(p-M)/r*l,y=h-(h-y)/r*l,A=l,Y()},{passive:!1})};let N=null;const tt=()=>{document.querySelector(".explore-container")&&(N!==null&&window.clearTimeout(N),N=window.setTimeout(()=>{F(R,!1)},100))};window.addEventListener("resize",tt);window.addEventListener("orientationchange",tt);const F=(e=null,S=!1)=>{const s=document.querySelector(".explore-container");if(!s)return;const u=d.utils.toArray(".explore-item");d.killTweensOf(u);const n=s.offsetWidth,m=s.offsetHeight;let o=180,g=64;n<=640?(o=128,g=20):n<=900&&(o=160,g=48);const D=o+g,Y=o+g,t=Math.max(1,Math.floor((n-o)/Y)+1),i=(t-1)*Y+o,c=Math.max(0,(n-i)/2),r=o+g,l=Math.max(1,Math.floor((m-o)/r)+1),a=Math.floor(t/2),p=Math.floor(l/2);let h=n,f=m,w=d.utils.toArray(".explore-item");console.log(`Total items found: ${w.length}, filtering for index: ${e}`),e!==null&&(w=w.filter(x=>String(x.dataset.teamIndex)===String(e)),console.log(`Filtered items: ${w.length}`)),w.sort(()=>Math.random()-.5);const L=[];u.forEach(x=>{e===null||String(x.dataset.teamIndex)===String(e)||d.set(x,{autoAlpha:0,pointerEvents:"none"})}),w.forEach(x=>{let X=0,P=0,Z=0,k=!1;const et=100;for(S||d.set(x,{position:"absolute",left:0,top:0,margin:0});!k&&Z<et;){let v,b;v=Math.floor(Math.random()*t),b=Math.floor(Math.random()*l),X=c+v*Y;let H=0;v%2!==0&&(H=r*.5),P=b*r+H,X<0&&(X=0),P<0&&(P=0);const z=X+o/2,E=P+o/2;L.some(W=>{const T=z-W.centerX,q=E-W.centerY;return Math.sqrt(T*T+q*q)<D})||(k=!0,L.push({centerX:z,centerY:E})),Z++}if(!k){let v=0;for(;!k;){const b=[],H=-v,z=v;for(let E=H;E<=z;E++)for(let I=H;I<=z;I++){if(v>0&&Math.abs(E)!==v&&Math.abs(I)!==v)continue;const W=a+E,T=p+I;W>=0&&T>=0&&b.push({c:W,r:T})}b.sort(()=>Math.random()-.5);for(const E of b){const I=E.c,W=E.r;X=c+I*Y;let T=0;I%2!==0&&(T=r*.5),P=W*r+T;const q=X+o/2,j=P+o/2;if(!L.some(J=>{const K=q-J.centerX,Q=j-J.centerY;return Math.sqrt(K*K+Q*Q)<D})){k=!0,L.push({centerX:q,centerY:j});break}}if(v++,v>100)break}}if(k){const v=X+o+g,b=P+o+g;v>h&&(h=v),b>f&&(f=b),S?d.to(x,{x:X,y:P,autoAlpha:1,duration:.5,ease:"power2.out",overwrite:"auto",pointerEvents:"auto"}):d.set(x,{x:X,y:P,autoAlpha:1,pointerEvents:"auto"})}else console.warn("Failed to place item even with expansion:",x),d.set(x,{x:-9999,y:-9999,opacity:0,pointerEvents:"none"})}),U=h,V=f};F(null,!1);d.fromTo(".explore-item",{autoAlpha:0},{autoAlpha:1,duration:.6,stagger:.03,ease:"power2.out"});nt();const ot=e=>{if(e.length===0)return;const S=document.querySelector(".explore-container");if(!S)return;let s=1/0,u=1/0,n=-1/0,m=-1/0;e.forEach(p=>{const h=d.getProperty(p,"x"),f=d.getProperty(p,"y"),w=p.offsetWidth,L=p.offsetHeight;s=Math.min(s,h),u=Math.min(u,f),n=Math.max(n,h+w),m=Math.max(m,f+L)});const o=(s+n)/2,g=(u+m)/2,D=n-s,Y=m-u,t=S.offsetWidth,i=S.offsetHeight,c=100,r=(t-c*2)/D,l=(i-c*2)/Y,a=Math.min(r,l,1.5);A=a,M=t/2-o*a,y=i/2-g*a};let R=null;const _=document.querySelectorAll(".anchor-btn");_.forEach(e=>{const S=s=>{if(e.tagName==="A")return;if(s.type==="keydown"){const n=s;if(n.key!=="Enter"&&n.key!==" ")return;s.preventDefault()}else s.preventDefault();const u=e.dataset.index;R===u?(_.forEach(n=>n.classList.remove("active")),R=null,F(null,!0),A=1,M=0,y=0):(_.forEach(n=>n.classList.remove("active")),e.classList.add("active"),R=u||null,F(u||null,!0),setTimeout(()=>{const m=d.utils.toArray(".explore-item").filter(o=>Number(d.getProperty(o,"autoAlpha"))>0);ot(m)},100))};e.addEventListener("click",S),e.addEventListener("keydown",S)});
