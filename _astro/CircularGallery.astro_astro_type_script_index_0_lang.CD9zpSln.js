import{_ as E}from"./preload-helper.BbGayGA1.js";typeof window<"u"&&window.addEventListener("DOMContentLoaded",()=>{const o=document.querySelector(".circular-gallery");if(!o)return;const p=Number(o.dataset.count??"0"),c=p>0?360/p:0;let f=!1,L=0,P=0,r=0,s=0,v=null,w=0,_=0,y=0,m=null;const T=o.querySelector(".gallery-info__title"),h=o.querySelector(".gallery-info__description"),A=t=>{if(p===0||c===0)return 0;const n=(t%360+360)%360;let e=1/0,i=0;for(let a=0;a<p;a++){const l=(a*c-n+360)%360,d=Math.min(l,360-l);d<e&&(e=d,i=a)}return i},u=async()=>{if(!T||!h||p===0)return;const t=A(r),e=o.querySelectorAll(".gallery-item")[t];if(e){const i=e.dataset.posterTitle||"",a=e.dataset.posterDescription||"";T.textContent=i;try{const{marked:g}=await E(async()=>{const{marked:d}=await import("./marked.esm.7nWwd-IH.js");return{marked:d}},[]),l=g.parse(a);h.innerHTML=typeof l=="string"?l:""}catch{h.textContent=a}}},D=t=>{r=t,o.style.setProperty("--rotation",`${t}deg`),u()},M=t=>"touches"in t&&t.touches.length?t.touches[0].clientX:t.clientX??0,I=t=>{if(t.target.closest(".gallery-nav"))return;m&&(m.kill(),m=null),f=!0;const e=M(t);L=e,P=r,w=e,_=Date.now(),y=0,o.classList.add("is-dragging")},q=t=>{if(!f)return;const n=M(t),e=Date.now(),i=n-L,a=o.offsetWidth||1,g=i/a*45,l=e-_;l>0&&(y=(n-w)/a*45/l),w=n,_=e,D(P+g)},R=()=>{f&&(f=!1,o.classList.remove("is-dragging"),E(async()=>{const{gsap:t}=await import("./index.CMq3EfTn.js");return{gsap:t}},[]).then(({gsap:t})=>{const n=c?t.utils.snap(c):e=>e;if(Math.abs(y)>.02){const e=y*300,i=r+e,a=n(i),g=Math.abs(a-r),l=Math.min(1.2,Math.max(.4,g/100)),d={value:r};m=t.to(d,{value:a,duration:l,ease:"power3.out",onUpdate(){r=d.value,o.style.setProperty("--rotation",`${d.value}deg`),u()},onComplete(){r=a,s=a,o.style.setProperty("--rotation",`${a}deg`),u(),m=null}})}else{const e={value:r},i=n(r);t.to(e,{value:i,duration:.4,ease:"power3.out",onUpdate(){D(e.value)},onComplete(){s=i,u()}})}}).catch(()=>{if(c){const t=Math.round(r/c)*c;D(t),s=t}}))};o.querySelectorAll(".gallery-image").forEach(t=>{t.addEventListener("dragstart",n=>n.preventDefault())});const S=t=>{s=t,E(async()=>{const{gsap:n}=await import("./index.CMq3EfTn.js");return{gsap:n}},[]).then(({gsap:n})=>{v&&v.kill();const e={value:r};v=n.to(e,{value:s,duration:.4,ease:"power3.out",onUpdate(){r=e.value,o.style.setProperty("--rotation",`${e.value}deg`)},onComplete(){r=s,o.style.setProperty("--rotation",`${s}deg`),u(),v=null}})}).catch(()=>{r=s,o.style.setProperty("--rotation",`${s}deg`),u()})},k=o.querySelector(".gallery-nav--left"),X=o.querySelector(".gallery-nav--right");k&&k.addEventListener("click",t=>{t.stopPropagation();const n=s+c;S(n)}),X&&X.addEventListener("click",t=>{t.stopPropagation();const n=s-c;S(n)}),u(),o.addEventListener("pointerdown",I),window.addEventListener("pointermove",q),window.addEventListener("pointerup",R),window.addEventListener("pointercancel",R)});
