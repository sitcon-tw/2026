import{marked as H}from"./marked.esm.7nWwd-IH.js";const C=()=>{const i=document.querySelector(".sponsor-container");if(!i)return()=>{};if(i.dataset.sponsorInit==="true")return()=>{};i.dataset.sponsorInit="true";const e=document.getElementById("sponsor-dialog"),s=document.getElementById("close-dialog"),g=document.getElementById("dialog-title"),m=document.getElementById("dialog-desc"),u=document.getElementById("dialog-type"),f=document.getElementById("dialog-img"),a=document.querySelector(".visit-btn"),c=()=>{e&&(e.classList.add("closing"),window.location.hash&&history.pushState(null,"",window.location.pathname+window.location.search),e.addEventListener("animationend",()=>{e.close(),e.classList.remove("closing")},{once:!0}))},l=async t=>{if(!e)return;const{name:n,desc:o,type:y,img:L,url:I,id:S}=t.dataset;g&&(g.textContent=n??null),m&&(m.innerHTML=o?await H.parse(String(o)):""),u&&(u.textContent=y??null),f&&L&&(f.src=L),a&&(a.href=I||"#",a.style.display=I?"inline-block":"none"),S&&history.pushState(null,"",`#${S}`),e.showModal()},p=t=>{const n=t.target?.closest(".sponsor-trigger");n&&l(n)};document.addEventListener("click",p);const h=()=>{c()};s&&s.addEventListener("click",h);const v=t=>{if(!e)return;const n=e.getBoundingClientRect(),o=t;o.clientX>=n.left&&o.clientX<=n.right&&o.clientY>=n.top&&o.clientY<=n.bottom||c()};e&&e.addEventListener("click",v);const w=()=>{const t=window.location.hash.slice(1);if(t&&e&&!e.open){const n=i.querySelector(`[data-id="${t}"]`);n&&l(n)}else!t&&e?.open&&c()};window.addEventListener("hashchange",w);const E=window.location.hash.slice(1);if(E){const t=i.querySelector(`[data-id="${E}"]`);t&&(window.onload=()=>document.getElementById("sponsors")?.scrollIntoView(),l(t))}return()=>{document.removeEventListener("click",p),s&&s.removeEventListener("click",h),e&&e.removeEventListener("click",v),window.removeEventListener("hashchange",w),i.dataset.sponsorInit="false"}};let d=null;const r=()=>{d?.(),d=C()},k=()=>{r()},B=()=>{document.removeEventListener("astro:page-load",k),document.removeEventListener("astro:before-swap",B),d?.()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r,{once:!0}):r();document.addEventListener("astro:page-load",k);document.addEventListener("astro:before-swap",B);
