import{gsap as ne}from"./index.CMq3EfTn.js";const t=document.getElementById("agenda-scroll"),J=document.getElementById("scroll-left"),O=document.getElementById("scroll-right"),U=document.getElementById("zoom-in"),V=document.getElementById("zoom-out"),y=document.getElementById("current-time-indicator"),E=document.getElementById("current-time-line"),Y=document.getElementById("agenda-timeline-inner");(!t||!J||!O)&&console.warn("Agenda timeline elements not found");if(Y&&U&&V){let n=2;const i=0,o=5,e=.25,d=()=>{Y.style.setProperty("--time-scale",n.toString())};d(),U.addEventListener("click",()=>{n=Math.min(o,n+e),d()}),V.addEventListener("click",()=>{n=Math.max(i,n-e),d()})}if(t&&J&&O){J.addEventListener("click",()=>{t.scrollBy({left:-300,behavior:"smooth"})}),O.addEventListener("click",()=>{t.scrollBy({left:300,behavior:"smooth"})});let i=!1,o=0,e=0,d=0,B=0,v=0,l=null;const p=s=>{const r=s.target;if(!r||document.getElementById("session-modal")?.classList.contains("active")||r.closest(".venue-label")||r.tagName==="BUTTON"||r.tagName==="A"||r.closest("button")||r.closest("a"))return;l&&(l.kill(),l=null),i=!0;const a="touches"in s?s.touches[0].clientX:s.clientX;o=a,e=t.scrollLeft,d=a,B=Date.now(),v=0,t.style.cursor="grabbing",t.style.userSelect="none",s.preventDefault()},m=s=>{if(!i)return;if(document.getElementById("session-modal")?.classList.contains("active")){g();return}const u="touches"in s?s.touches[0].clientX:s.clientX,f=Date.now(),a=u-o,T=f-B;T>0&&(v=(u-d)/T),t.scrollLeft=e-a,d=u,B=f,s.preventDefault()},g=()=>{if(i&&(i=!1,t.style.cursor="grab",t.style.userSelect="",Math.abs(v)>.01)){const s=t.scrollWidth-t.clientWidth,r=t.scrollLeft,u=-v*1e3,f=r+u*.5,a=Math.max(0,Math.min(s,f));l=ne.to(t,{scrollLeft:a,duration:Math.min(2,Math.abs(v)*10),ease:"power2.out",onUpdate:()=>{t.scrollLeft<0?(t.scrollLeft=0,l&&(l.kill(),l=null)):t.scrollLeft>s&&(t.scrollLeft=s,l&&(l.kill(),l=null))},onComplete:()=>{l=null}})}};t.addEventListener("mousedown",p),document.addEventListener("mousemove",m),document.addEventListener("mouseup",g),t.addEventListener("touchstart",p,{passive:!1}),t.addEventListener("touchmove",m,{passive:!1}),t.addEventListener("touchend",g),t.addEventListener("wheel",s=>{if(document.getElementById("session-modal")?.classList.contains("active"))return;const u=s.deltaX||0,f=s.deltaY||0;Math.abs(u)>Math.abs(f)?u!==0&&(s.preventDefault(),t.scrollBy({left:u,behavior:"auto"})):f!==0&&s.shiftKey&&(s.preventDefault(),t.scrollBy({left:f,behavior:"auto"}))},{passive:!1});const h=document.getElementById("agenda-timeline-inner"),N=h?.dataset.minTime,L=h?.dataset.maxTime,R=h?.dataset.totalSlots,q=h?.dataset.timeLabels,z=h?.dataset.slotLeftPercents,F=h?.dataset.slotWeights,K=h?.dataset.totalWeight;if(h&&y&&E&&N&&L&&R&&q&&z&&F&&K){const s=parseInt(N,10),r=parseInt(L,10),u=parseInt(R,10),f=parseFloat(K);let a=[],T=[],P=[];try{a=JSON.parse(q),T=JSON.parse(z),P=JSON.parse(F)}catch{a=[],T=[],P=[]}const te=I=>{if(u<=0||a.length<2)return 0;for(let b=0;b<a.length-1;b++){const w=a[b],C=a[b+1];if(I>=w&&I<=C){const S=C-w,k=S>0?(I-w)/S:0,A=P[b]/f*100;return T[b]+k*A}}return I<a[0]?0:100};if(!isNaN(s)&&!isNaN(r)&&a.length>=2){const I=Date.now();if(I<s||I>r)y.parentNode&&y.parentNode.removeChild(y),E.parentNode&&E.parentNode.removeChild(E);else{let b=!1;const w=E||y;if(w&&!b){const S=w.offsetLeft,k=t.clientWidth,A=S-k/2;t.scrollTo({left:Math.max(0,A),behavior:"smooth"}),b=!0}const C=()=>{const S=Date.now();if(S>=s&&S<=r){const A=`${te(S)}%`;y.style.left=A,E.style.left=A}else y.parentNode&&y.parentNode.removeChild(y),E.parentNode&&E.parentNode.removeChild(E)};C(),setInterval(C,1e3)}}}}const M=document.getElementById("agenda-timeline"),H=[{list:document.getElementById("filter-tabs-list"),slider:document.getElementById("filter-tab-slider")},{list:document.getElementById("filter-tabs-list-mobile"),slider:document.getElementById("filter-tab-slider-mobile")}].filter(n=>!!n.list&&!!n.slider),W=document.querySelectorAll(".filter-tab");function D(){H.forEach(({list:n,slider:i})=>{const o=n.querySelector(".filter-tab.active, .filter-tab[aria-selected='true']");if(!o)return;const e=n.getBoundingClientRect(),d=o.getBoundingClientRect();i.style.left=`${d.left-e.left}px`,i.style.width=`${d.width}px`})}W.forEach(n=>{n.addEventListener("click",()=>{const i=n.dataset.filter;if(!i)return;if(i==="all"&&M?.classList.contains("agenda-url-curated")){document.dispatchEvent(new CustomEvent("clearUrlCuratedState")),D();return}const o=Array.from(W).filter(e=>e!==n&&e.dataset.filter===i);W.forEach(e=>{e.setAttribute("aria-selected","false"),e.classList.remove("active")}),n.setAttribute("aria-selected","true"),n.classList.add("active"),o.forEach(e=>{e.setAttribute("aria-selected","true"),e.classList.add("active")}),M&&(i==="favorites"?M.classList.add("agenda-filter-favorites"):M.classList.remove("agenda-filter-favorites")),D()})});requestAnimationFrame(()=>{D()});H.length>0&&window.addEventListener("resize",D);const x=document.getElementById("share-jam-trigger"),c=document.getElementById("share-jam-trigger-mobile"),se="sitcon2026:agendaBookmarks";let X=!1;function Q(){try{const n=localStorage.getItem(se),i=n?JSON.parse(n):[],o=Array.isArray(i)&&i.length>0;x&&(x.style.display=o?"":"none");const e=document.getElementById("agenda-mobile-controls");c&&(o&&!X?(c.classList.remove("hidden"),c.classList.add("slide-in","glowing"),e?.classList.add("share-button-visible"),e?.classList.remove("share-button-hidden"),setTimeout(()=>{c.classList.remove("glowing")},2e3)):!o&&X?(c.classList.remove("slide-in","glowing"),c.classList.add("hidden"),e?.classList.add("share-button-hidden"),e?.classList.remove("share-button-visible")):o?(c.classList.remove("hidden"),c.classList.add("slide-in"),e?.classList.add("share-button-visible"),e?.classList.remove("share-button-hidden")):(c.classList.add("hidden"),c.classList.remove("slide-in","glowing"),e?.classList.add("share-button-hidden"),e?.classList.remove("share-button-visible"))),X=o}catch{x&&(x.style.display="none"),c&&(c.classList.add("hidden"),document.getElementById("agenda-mobile-controls")?.classList.add("share-button-hidden"),document.getElementById("agenda-mobile-controls")?.classList.remove("share-button-visible"))}}x&&x.addEventListener("click",()=>{window.openShareJamModal?.()});c&&c.addEventListener("click",()=>{window.openShareJamModal?.()});Q();document.addEventListener("agendaBookmarksChanged",Q);function Z(){const n=document.getElementById("agenda-phone-view");if(!n||window.matchMedia("(min-width: 769px)").matches)return;const i=document.getElementById("agenda-timeline-inner"),o=i?.getAttribute("data-min-time"),e=i?.getAttribute("data-max-time"),d=o!=null?parseInt(o,10):NaN,B=e!=null?parseInt(e,10):NaN,v=Date.now();if(isNaN(d)||isNaN(B)||v<d||v>B){n.querySelectorAll(".time-block.current").forEach(m=>{m.classList.remove("current"),m.querySelector(".phone-time-indicator")?.remove()});return}const l=n.querySelectorAll(".time-block");let p=null;l.forEach(m=>{const g=parseInt(m.dataset.time??"",10);!isNaN(g)&&g<=v&&(p=p==null?g:Math.max(p,g))}),l.forEach(m=>{const g=parseInt(m.dataset.time??"",10),h=p!=null&&g===p,N=m.querySelector(".time-block-label");let L=m.querySelector(".phone-time-indicator");h?(m.classList.add("current"),!L&&N&&(L=document.createElement("span"),L.className="phone-time-indicator",L.setAttribute("aria-hidden","true"),N.insertBefore(L,N.firstChild))):(m.classList.remove("current"),L?.remove())})}const ie=document.getElementById("agenda-phone-view"),ee=document.getElementById("agenda-timeline-inner"),$=ee?.getAttribute("data-min-time"),j=ee?.getAttribute("data-max-time"),_=$!=null?parseInt($,10):NaN,G=j!=null?parseInt(j,10):NaN,oe=!isNaN(_)&&!isNaN(G)&&Date.now()>=_&&Date.now()<=G;ie&&oe&&(Z(),setInterval(Z,60*1e3));
