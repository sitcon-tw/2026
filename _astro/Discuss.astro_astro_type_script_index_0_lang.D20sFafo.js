import{gsap as t}from"./index.CMq3EfTn.js";import{S as h}from"./ScrollTrigger.Cv03IO65.js";t.registerPlugin(h);const C=()=>{const e=document.getElementById("chatStream");if(!e)return()=>{};if(e.dataset.chatInit==="true")return()=>{};e.dataset.chatInit="true";const m=e.dataset.messages;if(!m)return()=>{};const r=e,f=JSON.parse(m),w=10,L=2e3;let g=0,p=0,s=null;const E=(n,i)=>{const a=document.createElement("div");return a.className=`message-bubble${i?" is-offset":""}`,a.innerHTML=`
				<div class="bubble-content">${n}</div>
				<div class="bubble-tail">
					<svg viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M0 21.9509C4.84211 12.1674 0 0 0 0L23 1.19723V1.22056C23 1.22056 9.68421 23.1715 0 21.9509Z" fill="#C2A05A"/>
					</svg>
				</div>
			`,a},b=(n=!0)=>{const i=f[g%f.length],a=p%2===1,c=E(i,a);if(r.appendChild(c),n&&(t.set(c,{opacity:0,scale:.92,transformOrigin:"left bottom"}),t.to(c,{opacity:1,scale:1,duration:.45,delay:.05,ease:"back.out(1.4)"})),r.children.length>w){const o=r.firstElementChild;o&&!o.dataset.removing&&(o.dataset.removing="true",t.to(o,{opacity:0,duration:.3,ease:"power2.out",onComplete:()=>o.remove()}))}g++,p++},v=()=>{s===null&&(s=window.setInterval(()=>b(!0),L))},l=()=>{s!==null&&(window.clearInterval(s),s=null)};for(let n=0;n<4;n++)b(!1);const S=h.create({trigger:"#discuss",start:"top bottom",end:"bottom top",onEnter:v,onLeave:l,onEnterBack:v,onLeaveBack:l});return()=>{l(),typeof t<"u"&&(t.killTweensOf(e),t.killTweensOf(e.children)),S.kill(),e.dataset.chatInit="false"}};let d=null;const u=()=>{d?.(),d=C()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u,{once:!0}):u();document.addEventListener("astro:page-load",u);document.addEventListener("astro:before-swap",()=>d?.());
