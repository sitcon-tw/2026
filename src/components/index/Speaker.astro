---
const speakers = [
	{
		name: "OsGa",
		img: "https://placehold.co/367x492/png?text=OsGa"
	},
	{
		name: "毛哥EM",
		img: "https://placehold.co/367x492/png?text=EM"
	},
	{
		name: "凱文 Kevin",
		img: "https://placehold.co/367x492/png?text=Kevin"
	},
	{
		name: "Nelson",
		img: "https://placehold.co/367x492/png?text=Nelson"
	},
	{
		name: "yc油成",
		img: "https://placehold.co/367x492/png?text=YC"
	}
];
---

<section class="speaker-section">
	<div class="title">
		<h2>年會</h2>
		<div class="line"></div>
		<h2>邀請講者</h2>
	</div>

	<div class="content-wrapper">
		<div class="speaker-list">
			{
				speakers.map((person, index) => (
					<div class:list={["speaker-item", { active: index === 0 }]} data-img={person.img}>
						<a>{person.name}</a>
					</div>
				))
			}
		</div>

		<div class="speaker-image">
			<img id="speaker-img" src={speakers[0].img} alt="Speaker" />
		</div>
	</div>

	<a href="#" class="cta-btn">查看議程表</a>

	<div class="bg-optimized">
		<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1512 543" preserveAspectRatio="none">
			<path opacity="0.34" d="M1512 0L0 320V543H1512V0Z" fill="#A1A1A1"></path>
			<path opacity="0.34" d="M0 0L1512 320V543H0V0Z" fill="#D9D9D9"></path>
			<path opacity="0.34" d="M0 0L1512 320V543H0V0Z" fill="#CDCDCD"></path>
		</svg>
	</div>
</section>

<style>
	.speaker-section {
		position: relative;
		background-color: #f4f4f4;
		padding: 4rem 2rem;
		display: flex;
		flex-direction: column;
		align-items: center;
		overflow: hidden;
	}

	.bg-optimized {
		position: absolute;
		top: auto;
		bottom: 0;
		left: 0;
		width: 100%;
		height: 60%;
		pointer-events: none;
	}

	.bg-optimized svg {
		width: 100%;
		height: 100%;
		display: block;
	}

	.title,
	.content-wrapper,
	.cta-btn {
		position: relative;
		z-index: 1;
	}

	.title {
		color: #a79164;
		display: flex;
		align-items: center;
		width: 100%;
		max-width: 1000px;
		margin-bottom: 3rem;
	}

	.title h2 {
		font-size: 5rem;
		margin: 0;
		font-weight: 600;
	}

	.line {
		height: 1px;
		background-color: #a79164;
		flex-grow: 1;
		margin: 0 2rem;
	}

	.content-wrapper {
		display: flex;
		justify-content: space-between;
		align-items: center;
		width: 100%;
		max-width: 1000px;
	}

	.speaker-list {
		display: flex;
		flex-direction: column;
		align-items: flex-start;
		gap: 3rem;
	}

	.speaker-item {
		font-size: 3rem;
		font-weight: bold;
		color: rgba(169, 124, 33, 0.3); /* 使用 rgba 替代 hex alpha 兼容性更好 */
		cursor: pointer;
		transition: 0.3s;
		display: flex;
		align-items: baseline;
		gap: 10px;
	}

	.speaker-item.active {
		color: #a79164;
		transform: scale(1.1);
		transform-origin: left center;
	}

	.speaker-image img {
		max-width: 100%;
		height: auto;
		border-radius: 8px;
		box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
	}

	.cta-btn {
		display: inline-block;
		text-decoration: none;
		font-family: sans-serif;
		font-weight: 700;
		font-size: 1.5rem;
		letter-spacing: 0.05em;
		color: #4f4031;

		padding: 12px 48px;
		margin-top: 5rem;

		border: 2px solid #4f4031;
		border-radius: 9999px;
		background: linear-gradient(180deg, #e6dac0 0%, #c4b188 100%);

		transition:
			transform 0.2s,
			filter 0.2s;
	}

	.cta-btn:hover {
		transform: translateY(-2px);
		filter: brightness(1.05);
	}
</style>

<script>
	const items = document.querySelectorAll(".speaker-item");
	const imgElement = document.getElementById("speaker-img");
	let currentIndex = 0;

	function updateView(index) {
		items.forEach(item => {
			item.classList.remove("active");
		});

		const targetItem = items[index];
		targetItem.classList.add("active");

		const newImgSrc = targetItem.getAttribute("data-img");
		if (imgElement && newImgSrc) {
			imgElement.src = newImgSrc;
		}

		currentIndex = index;
	}

	items.forEach((item, index) => {
		item.addEventListener("mouseenter", () => {
			updateView(index);
			stopAutoPlay();
		});

		item.addEventListener("mouseleave", () => {
			startAutoPlay();
		});
	});

	let timer = null;

	function startAutoPlay() {
		if (timer) return;
		timer = setInterval(() => {
			const nextIndex = (currentIndex + 1) % items.length;
			updateView(nextIndex);
		}, 2000);
	}

	function stopAutoPlay() {
		clearInterval(timer);
		timer = null;
	}

	startAutoPlay();
</script>
