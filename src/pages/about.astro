---
import Layout from "@/layout/Layout.astro";
import { type Lang, useTranslations } from "@/utils/i18n";

const lang = (Astro.props.lang ?? "zh") as Lang;
const t = useTranslations(lang).about;
const title = Astro.props.title ?? (lang === "en" ? `${t.title} - SITCON 2026` : `${t.title} - SITCON 2026`);
const description = Astro.props.description ?? (lang === "en" ? t.description : t.description);
---

<Layout lang={lang} title={title} description={description}>
	<main>
		<div class="about-header">
			<img src="/2026/img/about/sitcon-2025.webp" alt="SITCON 2025" class="header-img" />
			<h1 class="text-3xl font-bold mb-4">{t.title}</h1>
			<p class="text-lg">{t.description}</p>
		</div>
		<div class="wavy-spacer"></div>
		<div class="community-section">
			<h2 class="section-title">{t.community.title}</h2>
			<div class="community-data-container">
				{
					t.community.data.map(item => (
						<div class="community-item">
							<p>{item.count}</p>
							<h3>{item.label}</h3>
						</div>
					))
				}
			</div>
		</div>
		<div class="wavy-spacer"></div>
		<div class="news-section">
			<h2 class="section-title">{t.news.title}</h2>
			<div class="news-data-container">
				{
					t.news.things.map(item => (
						<div class="news-item">
							<img src={`/2026/img/about/${item.image}.webp`} alt={item.title} class="news-image" />
							<div class="news-overlay">
								<h3>{item.title}</h3>
								<p>{item.description}</p>
							</div>
						</div>
					))
				}
			</div>
		</div>
	</main>
</Layout>

<style>
	main {
		max-width: 60rem;
		margin: 0 auto;
		padding: 0 2rem;
	}

	.wavy-spacer {
		height: 20px;
		width: 100%;
		background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 4" fill="none" stroke="%23E8BB5F" stroke-width="1"><path d="M0 3.5c5 0 5-3 10-3s5 3 10 3 5-3 10-3 5 3 10 3"/></svg>');
		background-repeat: repeat-x;
		background-size: 40px 10px;
		margin: 2rem 0;
	}

	.about-header {
		margin-top: 8rem;
		display: flex;
		flex-direction: column;
		gap: 1rem;
	}

	.header-img {
		border-radius: 1rem;
		object-fit: cover;
		height: 20rem;
	}

	.community-section {
		text-align: center;
		margin-top: 3rem;
	}

	.section-title {
		font-weight: bold;
		text-align: center;
		font-size: 2rem;
		margin: 2rem 0;
	}

	.community-data-container {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr));
		gap: 1rem;
	}

	.community-item:last-child {
		grid-column: 1 / -1;
	}

	.community-item {
		background-color: #ffffff;
		border-radius: 1rem;
		padding: 1rem;
		box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		color: #3c2d0e;
	}

	.community-item p {
		font-size: 2rem;
		font-weight: bold;
		margin-bottom: 0.2rem;
	}

	.community-item h3 {
		font-size: 1rem;
	}

	.news-data-container {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(20rem, 1fr));
		gap: 1rem;
	}

	.news-item:last-child {
		grid-column: 1 / -1;
	}

	.news-item {
		position: relative;
		border-radius: 1rem;
		overflow: hidden;
		height: 15rem;
	}

	.news-image {
		position: absolute;
		inset: 0;
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.news-overlay {
		position: absolute;
		inset: 0;
		background: linear-gradient(to top, rgba(0, 0, 0, 0.75) 0%, rgba(0, 0, 0, 0.3) 60%, transparent 100%);
		display: flex;
		flex-direction: column;
		justify-content: flex-end;
		padding: 0.5rem 1.5rem;
		color: #ffffff;
	}

	.news-overlay h3 {
		font-size: 1.25rem;
		font-weight: bold;
		margin-bottom: 0.5rem;
	}

	.news-overlay p {
		font-size: 0.8rem;
		line-height: 1.5;
		opacity: 0.9;
	}
</style>
