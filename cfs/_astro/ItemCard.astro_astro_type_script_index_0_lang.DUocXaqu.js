import{b as s}from"./local-storage.CNRxCPsY.js";function d(e){const t=document.querySelector(`.card[data-card-id="${e}"]`);if(!t)return;const n=t.querySelector(".remaining-tag");if(!n)return;const u=t.getAttribute("data-has-sub-items")==="true",m=n.getAttribute("data-unit")||"";let a=0,i=0;if(u)try{JSON.parse(t.getAttribute("data-sub-items")||"[]").forEach(c=>{const o=parseInt(c.remaining,10);isNaN(o)||(a+=o);const f=s(c.id)||0;i+=f})}catch(r){console.error("Error parsing sub-items data:",r);return}else a=parseInt(n.getAttribute("data-initial-remaining")||"0",10),i=s(e)||0;const l=Math.max(0,a-i),g=n.textContent?.split(" ")[0]||"";n.textContent=`${g} ${l} ${m}`}window.addEventListener("itemsChange",function(){document.querySelectorAll(".card").forEach(e=>{const t=e.getAttribute("data-card-id");t&&d(t)})});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".card").forEach(e=>{const t=e.getAttribute("data-card-id");t&&d(t)})});
