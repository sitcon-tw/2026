import{g as l,a as c,i as m,r as p,b as f}from"./local-storage.BX_TrTX5.js";function n(){const o=l(),e=new Set(o.map(t=>t.id));document.querySelectorAll(".addon-card .add-button").forEach(t=>{const d=t.getAttribute("data-item-id"),a=t.getAttribute("data-item-deadline")||"";if(c(a)?(t.setAttribute("disabled","true"),t.classList.add("disabled")):(t.removeAttribute("disabled"),t.classList.remove("disabled")),d){let s=e.has(d);if(!s){for(const u of e)if(u.startsWith(d+"-sub-")){s=!0;break}}s?t.classList.add("added"):t.classList.remove("added")}})}function g(){document.querySelectorAll(".addon-card").forEach(e=>{const i=e.getAttribute("data-item-id");i&&(e.style.cursor="pointer",e.addEventListener("click",function(t){if(t.target.closest(".add-button"))return;t.stopPropagation();const a=`item-popup-${i}`;window.popupCtrl(a,"open")}))})}function I(){document.querySelectorAll(".addon-card .add-button").forEach(e=>{e.addEventListener("click",function(i){i.stopPropagation();const t=this.getAttribute("data-item-id"),d=this.getAttribute("data-item-name"),a=this.getAttribute("data-has-sub-items")==="true",r=this.getAttribute("data-item-deadline")||"";if(!c(r)&&t)if(a){const s=`item-popup-${t}`;window.popupCtrl(s,"open")}else d&&(m(t)?p(t):f({id:t,title:d,category:"addon",image:"",deadline:""}),n())})})}document.addEventListener("DOMContentLoaded",function(){n(),g(),I()});window.addEventListener("itemsChange",n);document.addEventListener("interested-items-changed",n);
