import{a as m,i as b,r as y,b as A}from"./local-storage.BX_TrTX5.js";import{g as v}from"./plan-helper.C8iL4cXF.js";document.addEventListener("DOMContentLoaded",function(){function u(t){try{const e=document.querySelector(`.sub-add-button[data-sub-item-id="${t}"]`);if(!e)return;const r=e.getAttribute("data-item-deadline")||"";m(r)?(e.setAttribute("disabled","true"),e.classList.add("disabled")):(e.removeAttribute("disabled"),e.classList.remove("disabled")),b(t)?e.classList.add("added"):e.classList.remove("added")}catch{}}document.addEventListener("click",function(t){const e=t.target;if(e.closest(".sub-add-button")){t.preventDefault(),t.stopPropagation();const r=e.closest(".sub-add-button"),s=r.getAttribute("data-sub-item-id");if(!s)return;const o=r.getAttribute("data-item-deadline")||"";if(m(o))return;if(b(s))y(s);else{const c=r.getAttribute("data-sub-item-name")||"",d=r.getAttribute("data-sub-item-price")||"",a=r.closest(".popup-content"),n=a?.querySelector(".item-image img")?.getAttribute("src")||"",g=a?.querySelector(".category")?.textContent||"",p=v(s,d);A({id:s,title:c,category:"all",image:n,deadline:g,price:p})}u(s)}}),window.addEventListener("itemsChange",function(){document.querySelectorAll(".sub-add-button").forEach(t=>{const e=t.getAttribute("data-sub-item-id");e&&u(e)})}),document.querySelectorAll(".sub-add-button").forEach(t=>{const e=t.getAttribute("data-sub-item-id");e&&u(e)});function f(){document.querySelectorAll(".image-carousel").forEach(t=>{try{let e=function(){if(o.forEach((i,n)=>{i.classList.toggle("active",n===d)}),a){const n=o[d].getAttribute("data-description")||"";a.textContent=n}},r=function(){d>0?d--:d=o.length-1,e()},s=function(){d<o.length-1?d++:d=0,e()};const o=t.querySelectorAll(".carousel-slide"),l=t.querySelector(".carousel-prev"),c=t.querySelector(".carousel-next");if(o.length===0)return;let d=0;const a=t.querySelector(".carousel-description");o.forEach(i=>{const n=i.querySelector("img");n&&n.addEventListener("error",()=>{})}),l&&l.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),r()}),c&&c.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),s()}),t.addEventListener("keydown",i=>{const n=i;n.key==="ArrowLeft"?(n.preventDefault(),r()):n.key==="ArrowRight"&&(n.preventDefault(),s())}),t.setAttribute("tabindex","0"),e()}catch{}})}f()});
