import{g as r,i as c,r as u,a as m}from"./local-storage.7Ppo3yvK.js";function o(){const s=r(),e=new Set(s.map(t=>t.id));document.querySelectorAll(".addon-card .add-button").forEach(t=>{const d=t.getAttribute("data-item-id");if(d){let n=e.has(d);if(!n){for(const i of e)if(i.startsWith(d+"-sub-")){n=!0;break}}n?t.classList.add("added"):t.classList.remove("added")}})}function p(){document.querySelectorAll(".addon-card").forEach(e=>{const a=e.getAttribute("data-item-id");a&&(e.style.cursor="pointer",e.addEventListener("click",function(t){if(t.target.closest(".add-button"))return;t.stopPropagation();const n=`item-popup-${a}`;window.popupCtrl(n,"open")}))})}function l(){document.querySelectorAll(".addon-card .add-button").forEach(e=>{e.addEventListener("click",function(a){a.stopPropagation();const t=this.getAttribute("data-item-id"),d=this.getAttribute("data-item-name"),n=this.getAttribute("data-has-sub-items")==="true";if(t)if(n){const i=`item-popup-${t}`;window.popupCtrl(i,"open")}else d&&(c(t)?u(t):m({id:t,title:d,category:"addon",image:"",deadline:""}),o())})})}document.addEventListener("DOMContentLoaded",function(){o(),p(),l()});window.addEventListener("itemsChange",o);document.addEventListener("interested-items-changed",o);
