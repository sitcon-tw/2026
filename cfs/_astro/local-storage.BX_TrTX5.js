const i="interestItems";function s(){if(typeof window>"u")return;const e=new CustomEvent("itemsChange",{detail:{items:o()}});window.dispatchEvent(e)}function o(){if(typeof window>"u")return[];try{const e=localStorage.getItem(i);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting interested items from localStorage:",e),[]}}function a(e){if(typeof window>"u")return!1;try{const t=o();if(t.findIndex(r=>r.id===e.id)===-1){t.push(e);const r=e.price?parseInt(e.price.replace(/[^0-9]/g,"")):0;return window.dataLayer.push({event:"add_to_cart",ecommerce:{currency:"TWD",value:r,items:[{item_id:e.id,item_name:e.title||"unknown",item_category:"2026 CFS",price:r}]},page_path:window.location.pathname}),localStorage.setItem(i,JSON.stringify(t)),s(),!0}return!1}catch(t){return console.error("Error adding interested item to localStorage:",t),!1}}function d(e){if(typeof window>"u")return!1;try{const n=o().filter(r=>r.id!==e);return localStorage.setItem(i,JSON.stringify(n)),s(),!0}catch(t){return console.error("Error removing interested item from localStorage:",t),!1}}function c(e){return typeof window>"u"?!1:o().some(n=>n.id===e)}function f(e){if(!e||e==="")return!1;try{const t=new Date(e);return isNaN(t.getTime())?(console.error("Invalid deadline date string:",e),!1):(t.setHours(23,59,59,999),new Date>t)}catch(t){return console.error("Error parsing deadline:",t),!1}}export{f as a,a as b,o as g,c as i,d as r};
