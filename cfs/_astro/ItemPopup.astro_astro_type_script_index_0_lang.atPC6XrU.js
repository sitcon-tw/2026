import{b as m,a as q,u as b,r as E}from"./local-storage.CNRxCPsY.js";import{g as I}from"./plan-helper.3qqJhLrq.js";document.addEventListener("DOMContentLoaded",function(){function l(n){try{const e=document.querySelector(`.sub-item-controls[data-sub-item-id="${n}"]`);if(!e)return;const a=e.querySelector(".sub-quantity-display"),o=e.querySelector(".sub-quantity-btn.minus"),t=e.querySelector(".sub-quantity-btn.plus"),r=m(n)||0;a&&(a.textContent=r.toString());const u=99;t&&(t.disabled=r>=u),o&&(o.disabled=r<=0)}catch{}}document.addEventListener("click",function(n){const e=n.target;if(e.closest(".sub-quantity-btn.plus")){n.preventDefault(),n.stopPropagation();const o=e.closest(".sub-quantity-btn.plus").closest(".sub-item-controls");if(!o)return;const t=o.getAttribute("data-sub-item-id");if(!t)return;const r=m(t)||0,u=r+1;if(r===0){const c=o.closest(".popup-content"),d=o.getAttribute("data-sub-item-name")||"",i=c?.querySelector(".item-image img")?.getAttribute("src")||"",y=c?.querySelector(".category")?.textContent||"",p=o.closest(".sub-item")?.querySelector(".sub-item-price")?.textContent||"",g=I(t,p);q({id:t,title:d,category:"all",image:i,deadline:y,quantity:1,maxQuantity:99,price:g})}else b(t,u);l(t)}if(e.closest(".sub-quantity-btn.minus")){n.preventDefault(),n.stopPropagation();const o=e.closest(".sub-quantity-btn.minus").closest(".sub-item-controls");if(!o)return;const t=o.getAttribute("data-sub-item-id");if(!t)return;const r=m(t)||0;if(r<=0)return;const u=r-1;u===0?E(t):b(t,u),l(t)}}),window.addEventListener("itemsChange",function(){document.querySelectorAll(".sub-item-controls").forEach(n=>{const e=n.getAttribute("data-sub-item-id");e&&l(e)})}),document.querySelectorAll(".sub-item-controls").forEach(n=>{const e=n.getAttribute("data-sub-item-id");e&&l(e)});function f(){document.querySelectorAll(".image-carousel").forEach(n=>{try{let e=function(){if(t.forEach((s,i)=>{s.classList.toggle("active",i===c)}),d){const i=t[c].getAttribute("data-description")||"";d.textContent=i}},a=function(){c>0?c--:c=t.length-1,e()},o=function(){c<t.length-1?c++:c=0,e()};const t=n.querySelectorAll(".carousel-slide"),r=n.querySelector(".carousel-prev"),u=n.querySelector(".carousel-next");if(t.length===0)return;let c=0;const d=n.querySelector(".carousel-description");t.forEach(s=>{const i=s.querySelector("img");i&&i.addEventListener("error",()=>{})}),r&&r.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),a()}),u&&u.addEventListener("click",s=>{s.preventDefault(),s.stopPropagation(),o()}),n.addEventListener("keydown",s=>{const i=s;i.key==="ArrowLeft"?(i.preventDefault(),a()):i.key==="ArrowRight"&&(i.preventDefault(),o())}),n.setAttribute("tabindex","0"),e()}catch{}})}f()});
