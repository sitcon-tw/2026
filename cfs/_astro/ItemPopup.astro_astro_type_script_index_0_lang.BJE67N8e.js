import{i as m,r as p,a as y}from"./local-storage.BXwmNZOb.js";import{g as v}from"./plan-helper.RXLN4ebZ.js";document.addEventListener("DOMContentLoaded",function(){function u(e){try{const t=document.querySelector(`.sub-add-button[data-sub-item-id="${e}"]`);if(!t)return;m(e)?t.classList.add("added"):t.classList.remove("added")}catch{}}document.addEventListener("click",function(e){const t=e.target;if(t.closest(".sub-add-button")){e.preventDefault(),e.stopPropagation();const s=t.closest(".sub-add-button"),r=s.getAttribute("data-sub-item-id");if(!r)return;if(m(r))p(r);else{const c=s.getAttribute("data-sub-item-name")||"",a=s.getAttribute("data-sub-item-price")||"",o=s.closest(".popup-content"),n=o?.querySelector(".item-image img")?.getAttribute("src")||"",g=o?.querySelector(".category")?.textContent||"",b=v(r,a);y({id:r,title:c,category:"all",image:n,deadline:g,price:b})}u(r)}}),window.addEventListener("itemsChange",function(){document.querySelectorAll(".sub-add-button").forEach(e=>{const t=e.getAttribute("data-sub-item-id");t&&u(t)})}),document.querySelectorAll(".sub-add-button").forEach(e=>{const t=e.getAttribute("data-sub-item-id");t&&u(t)});function f(){document.querySelectorAll(".image-carousel").forEach(e=>{try{let t=function(){if(d.forEach((n,i)=>{n.classList.toggle("active",i===o)}),l){const i=d[o].getAttribute("data-description")||"";l.textContent=i}},s=function(){o>0?o--:o=d.length-1,t()},r=function(){o<d.length-1?o++:o=0,t()};const d=e.querySelectorAll(".carousel-slide"),c=e.querySelector(".carousel-prev"),a=e.querySelector(".carousel-next");if(d.length===0)return;let o=0;const l=e.querySelector(".carousel-description");d.forEach(n=>{const i=n.querySelector("img");i&&i.addEventListener("error",()=>{})}),c&&c.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),s()}),a&&a.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),r()}),e.addEventListener("keydown",n=>{const i=n;i.key==="ArrowLeft"?(i.preventDefault(),s()):i.key==="ArrowRight"&&(i.preventDefault(),r())}),e.setAttribute("tabindex","0"),t()}catch{}})}f()});
